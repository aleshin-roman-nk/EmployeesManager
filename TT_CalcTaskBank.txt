05-04-2020 18-56
Общая идея данной части проекта
Цель:

Общая цель проекта:
	Учет распределения замещений смен.
	Учет, сколько дневных смен кто отработал.
	Назначение пылесосных смен.
	В целом 
	
	Отдельный модуль переменных месяца.
		Кол-во понедельникв, вторников и т.д.
		В том числе возможность выбрать части недели, н.п. сколько смен попадает на понед. - пятн.
	
	Имеем общий банк заказных задач (компрессорная, насосная и т.д.)
	
	Имеем общий (исходный) банк задач на месяц.
		Все ночные смены, дневные, вечерние.
	
	


Переменные месяца.
Кол-во смен, выпадающих на заданные дни недели.
	Например, сколько смен группы [имя_группы]. В сущности группы указано какие дни недели этой группы
		Это может быть хоть какая группа: ночная, вечерняя, дневная.


МОЖНО ПРОЩЩЕ!!!
Просто банк задач. Ночная, Ночная бригадир, Дневная и т.д.
При создании работы создавать тег, который ссылается на работу и на задачу.
Так можно подсчитать кол-во назначенных смен.

Расчитать количество смен для каждого отдела.
Берется образ департамента, берется количество смен на позиции департамента и сохраняется месячный образ.
Образ месяца содержит 

Можно делать выборку по тегам за месяц.
В любом случае у нас должна быть инструкция сборки картины отчета, какие именно группы тегов искать.
!!! > 
Составляем план работ на месяц, создаем из шаблона а так же можем добавлять другие запланированные работы.
Это отдельный модуль. Он просто дает что то вроде меню на месяц из которого можно брать пункты, добавляя работы в документ.
Сущность (класс) шаблона, содержит просто позиции.
При создании месячного плана можно обращаться к календарю. Календарь - это модуль, который может возвращать количество дней по неделям.
По сути это часть проекта по регистрации задач. То что я хотел сделать. Например задания от Лепокурова чтоб учитывать.
	Но мне нужен и проект, который регистрирует вообще задачи, которые считаются на выход Джою.
		Это уже совсем другая история.
		
Используя шаблон и календарь, в месячный план добавляются позиции образа.
< !!!

<
	Вариант
	Рассматривать это как купленный товар (услуги).
	Объем позиции - сколько смен в позиции.
	
	Блок вычисления, на вход подается расписание по дням, на выходе сколько смен.
	
	Банк задач. Бюджет каждой задачи. Каждый месяц число смен вычисляется.
	Задача содержит расписание.
	Кстати, Work не ссылается на работника. Только на документ.
	
	В списке просто пункт Ночная.Группа1 с рассчитанной стоимостью.
	
	Есть общий банк пунктов с месячным бюджетом.
	Из этого банка берется информация для расчета стоимости смены.
	Когда нажимаем ок при добавлении работы в документ, создается тег с ссылками на пункт, исполнителя.
	
	Еще вариант
	образ рассчитывается динамически и нигде не сохраняется. Выходные данные беруться по указанному месяцу.
		Т.е. задал месяц, получил стоимость смены.
		
		
	Работа документа это просто стоимость и количество и наименование.
	Работа создается "фабрикой" - 
	При выборе пункта для создания работы документа выдается тег. Он действует только если пользователь нажал ок окошка создания работы.
	Модуль расчета реализует интерфейс, который имеет метод, возвращающий параметры создания работы документа.
	
	ЕЩЕ ПРОЩЕ.
	Модуль списка позиций.
	Модуль расчета стоимости смены. Расчет универсальный для этого типа и состоит из:
		входные параметры: расписание, бюджет позиции.
		
		
	Отдел ночной уборки
		Расписание позиций
		Бюджет каждой позиции
		
		
	Создать работу -> Открыть окно с банком работ (содержит разделы, позиции разделов или просто плоский прайс-лист) 
			Проблема в том, что я хочу автоматического расчета курса стоимости смены... может временно дополнительным калькулятором обойтись, т.е. принимает расписание и бюджет, и вставляет стоимость в позицию.
		! Сущность позиции имеет бюджет, кол-во смен, стоимость смены. Последние два получаем из модулей расчета. Кол-во смен берем из модуля календаря, а стоимость одной смены возвращается автоматически get полем.
	
	06-04-2020 2-04
	Плоский прайс лист позиций работ, сущности содержат расписание, бюджет. В зависимости от месяца, курс стоимости динамически меняется.
		Ночная уборка. Бригада 1. Уборка
		Ночная уборка. Бригада 1. Бригадир
		
>>>>>>
	В целом, кажется я опять отошел от правила решения задачи. А именно, нужно определить исходные данные, которыми я располагаю и какие данные нужны на выходе.
	Зафиксировать конкретно, что должно быть результатом. Какой вид. Какие функции.
	Зафиксировать работу с привязкой данных при передачи коллекции во view.
	Вообще конечно больше времени на углубление знаний именно с#.
	Ну и давняя мечта - проект своего языка.
	
	
>>>
06-04-2020 12-07
Решено делать модуль, возвращающий коллекцию позиций.
	Стоимость вычисляется с помощью модуля расчета количества смен, бюджета позиции.
Отдельным проектом-модулем, который возвращает позицию - наименование, стоимость. В клиенте мы указываем нужное количество.

Алгоритм загрузки списка позиций.
1. Загрузка коллекции из бд.
2. Вызвать расчет кол-ва смен.
3. Присвоить кол-во смен.
4. 
	
06-04-2020 23-35
Удобно было бы ставить вообще дни. Т.е. выбрать день, и из расчета какой бригаде он принадлеждит, вернуть стоимость.

07-04-2020 11-26
Можно интерпретировать ежемесячный бюджет. Сумма одна, смен кол0во разное. Создается образ на каждый месяц.
Просто продумать схему цепочку алгоритма функционирования этого мезанизма.

!!!
Задача одна - я должен знать сколько всего смен по разделу, бюджет раздела и сколько всего отработано смен фактически по разделу.

Этот модуль работает с исполнителями. Т.е. месячный объем распределяется на людей, затем уже по этому формируются документы и работы по документам.

!!!
Модуль начислений - это один модуль. Модуль документов и работ по документа (уже действующий) - это другой модуль.
При работе по начислениям работаем с первым модулем. После того, как вся картина сформирована, строим и возвращаем коллекцию документов.
	После этого модуль расчета и никак не связан с модулем 2. Его задача - просто создать коллекцию документов.
	И документ-работа сущности никак не связаны с сущностями модуля расчета. Т.е. учет количества смен только внутри модуля начислений.
	
Схема модуля начислений.
Коллекцйия позиций работ.
Коллекция работников.
Модуль календаря.

Мы имеем:
ежемесячные позиции с месячным бюджетом.
разовые 

	
	
>




